<div *ngIf="!(relations | async)">
    <mat-progress-bar mode="indeterminate" color="accent"></mat-progress-bar>
</div>

<mat-card *ngFor="let relation of relations | async" class="card">

    <mat-card-header>
        <img mat-card-avatar src="{{this.getFbInfo(relation.userId)?.picture}}" />
        <mat-card-title class="header-title">{{this.getFbInfo(relation.userId)?.name | titlecase}}</mat-card-title>
        <mat-card-subtitle>
            <div *ngIf="relation.owesMe > relation.iOwe">
                <label class="win content-label">Owes me:</label>
                <span class="content-value win">ARS {{(relation.owesMe - relation.iOwe) | number:'1.2-2'}}</span>
            </div>
            <div *ngIf="relation.owesMe < relation.iOwe">
                <label class="lose content-label">I owe:</label>
                <span class="lose content-value">ARS {{(relation.iOwe - relation.owesMe) | number:'1.2-2'}}</span>
            </div>
        </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
        <mat-accordion class="example-headers-align">
            <mat-expansion-panel class="exp-panel-expenses">
                <mat-expansion-panel-header>
                    <mat-panel-title class="content-value">{{relation.expenses.length}} Expenses</mat-panel-title>
                </mat-expansion-panel-header>
                <mat-list class="list">
                    <div *ngFor="let expenseId of relation.expenses" class="list">
                        <mat-list-item class="expense-user-item">
                            <mat-icon mat-list-icon>assignment</mat-icon>
                          <!--<h4 mat-line>ARS{{this.getExpense(expenseId) | async | number:'1.2-2'}}</h4>-->
                        </mat-list-item>
                    </div>
                </mat-list>
            </mat-expansion-panel>
        </mat-accordion>
    </mat-card-content>
    <mat-card-actions align="end">
        <button mat-icon-button class="action-button pay-button">
            <mat-icon>attach_money</mat-icon>
        </button>
    </mat-card-actions>
</mat-card>

